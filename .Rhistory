)]
df_2223 <- df_2223[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df <- bind_rows(df_2223, df_2324)
# Create a dataset with only players playing at least 5 full matchs
# and scoring at least 5 goals
df_filtered <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE)
) %>%
filter(total_minutes >= 450, total_goals >= 3)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_filtered$Player)
View(df)
################
# Part 2 - Data#
################
# Import the data
file_2324 <- file.path(data.dir, 'Premier_League2324.csv')
file_2223 <- file.path(data.dir, 'Premier_League2223.csv')
df_2324 <- as.data.table(read.csv(file_2324))
df_2223 <- as.data.table(read.csv(file_2223))
# Take only the relevant column:
# player.tag, team.tag, id_team_A, id_team_B, match.tag, Goals, Shots.Total, xG..Expected.Goals, # Minutes:
df_2324 <- df_2324[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df_2223 <- df_2223[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df <- bind_rows(df_2223, df_2324)
# Create a dataset with only players playing at least 5 full matchs
# and scoring at least 5 goals
df_filtered <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE)
) %>%
filter(total_minutes >= 450, total_goals >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_filtered$Player)
unique(df$Player)
len(unique(df$Player))
length(unique(df$Player))
View(df_filtered)
################
# Part 2 - Data#
################
# Import the data
file_2324 <- file.path(data.dir, 'Premier_League2324.csv')
file_2223 <- file.path(data.dir, 'Premier_League2223.csv')
df_2324 <- as.data.table(read.csv(file_2324))
df_2223 <- as.data.table(read.csv(file_2223))
# Take only the relevant column:
# player.tag, team.tag, id_team_A, id_team_B, match.tag, Goals, Shots.Total, xG..Expected.Goals, # Minutes:
df_2324 <- df_2324[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df_2223 <- df_2223[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df <- bind_rows(df_2223, df_2324)
# Create a dataset with only players playing at least 5 full matchs
# and scoring at least 5 goals
df_filtered <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
xG = sum(Goals, na.rm = TRUE)
) %>%
filter(total_minutes >= 450, total_goals >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_filtered$Player)
length(unique(df$Player))
View(df_filtered)
################
# Part 2 - Data#
################
# Import the data
file_2324 <- file.path(data.dir, 'Premier_League2324.csv')
file_2223 <- file.path(data.dir, 'Premier_League2223.csv')
df_2324 <- as.data.table(read.csv(file_2324))
df_2223 <- as.data.table(read.csv(file_2223))
# Take only the relevant column:
# player.tag, team.tag, id_team_A, id_team_B, match.tag, Goals, Shots.Total, xG..Expected.Goals, # Minutes:
df_2324 <- df_2324[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df_2223 <- df_2223[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df <- bind_rows(df_2223, df_2324)
# Create a dataset with only players playing at least 5 full matchs
# and scoring at least 5 goals
df_filtered <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_minutes >= 450, total_goals >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_filtered$Player)
################
# Part 2 - Data#
################
# Import the data
file_2324 <- file.path(data.dir, 'Premier_League2324.csv')
file_2223 <- file.path(data.dir, 'Premier_League2223.csv')
df_2324 <- as.data.table(read.csv(file_2324))
df_2223 <- as.data.table(read.csv(file_2223))
# Take only the relevant column:
# player.tag, team.tag, id_team_A, id_team_B, match.tag, Goals, Shots.Total, xG..Expected.Goals, # Minutes:
df_2324 <- df_2324[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df_2223 <- df_2223[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df <- bind_rows(df_2223, df_2324)
# Create a dataset with only players playing at least 5 full matchs
# and scoring at least 5 goals
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
View(df_combined)
################
# Part 2 - Data#
################
# Import the data
file_2324 <- file.path(data.dir, 'Premier_League2324.csv')
file_2223 <- file.path(data.dir, 'Premier_League2223.csv')
df_2324 <- as.data.table(read.csv(file_2324))
df_2223 <- as.data.table(read.csv(file_2223))
# Take only the relevant column:
# player.tag, team.tag, id_team_A, id_team_B, match.tag, Goals, Shots.Total, xG..Expected.Goals, # Minutes:
df_2324 <- df_2324[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df_2223 <- df_2223[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
# Combine both datasets
df <- bind_rows(df_2223, df_2324)
# Create an Opposite_Team column
df <- df %>%
mutate(
Opposite_Team = ifelse(Team == Team_A, Team_B, Team_A)
)
View(df)
# Create a dataset with only players playing at least 5 full matchs
# and scoring at least 5 goals
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
length(unique(df$Player))
################
# Part 2 - Data#
################
# Import the data
file_2324 <- file.path(data.dir, 'Premier_League2324.csv')
file_2223 <- file.path(data.dir, 'Premier_League2223.csv')
df_2324 <- as.data.table(read.csv(file_2324))
df_2223 <- as.data.table(read.csv(file_2223))
# Take only the relevant column:
# player.tag, team.tag, id_team_A, id_team_B, match.tag, Goals, Shots.Total, xG..Expected.Goals, # Minutes:
df_2324 <- df_2324[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df_2223 <- df_2223[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
# Combine both datasets
df <- bind_rows(df_2223, df_2324)
# Create an Opposite_Team column
# Create a dataset with only players playing at least 5 full matchs
# and scoring at least 5 goals
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
length(unique(df$Player))
################
# Part 2 - Data#
################
# Import the data
file_2324 <- file.path(data.dir, 'Premier_League2324.csv')
file_2223 <- file.path(data.dir, 'Premier_League2223.csv')
df_2324 <- as.data.table(read.csv(file_2324))
df_2223 <- as.data.table(read.csv(file_2223))
# Take only the relevant column:
# player.tag, team.tag, id_team_A, id_team_B, match.tag, Goals, Shots.Total, xG..Expected.Goals, # Minutes:
df_2324 <- df_2324[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df_2223 <- df_2223[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
# Combine both datasets
df <- bind_rows(df_2223, df_2324)
# Create an Opposite_Team column
df <- df %>%
mutate(
Opposite_Team = ifelse(Team == Team_A, Team_B, Team_A)
)
# Create a dataset with only players playing at least 5 full matchs
# and scoring at least 5 goals
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
length(unique(df$Player))
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
include_solutions <- TRUE
require(rmarkdown)
require(knitr)
require(kableExtra)
require(data.table)
require(dplyr)
data.dir <- 'data/'
out.dir <- 'output/'
################
# Part 2 - Data#
################
# Import the data
file_2324 <- file.path(data.dir, 'Premier_League2324.csv')
file_2223 <- file.path(data.dir, 'Premier_League2223.csv')
df_2324 <- as.data.table(read.csv(file_2324))
df_2223 <- as.data.table(read.csv(file_2223))
# Take only the relevant column:
# player.tag, team.tag, id_team_A, id_team_B, match.tag, Goals, Shots.Total, xG..Expected.Goals, # Minutes:
df_2324 <- df_2324[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
df_2223 <- df_2223[, .('Player' = player.tag,
'Team' = team.tag,
'Team_A' = id_team_A,
'Team_B' = id_team_B,
'Match' = match.tag,
'Goals' = Goals,
'Shots' = Shots.Total,
'xG' = xG..Expected.Goals,
'Minutes' = Minutes
)]
# Combine both datasets
df <- bind_rows(df_2223, df_2324)
# Create an Opposite_Team column
df <- df %>%
mutate(
Opposite_Team = ifelse(Team == Team_A, Team_B, Team_A)
)
# Create a dataset with only players scoring at least 5 goals or with xG >=5
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
# Create a dataset with only players scoring at least 5 goals or with xG >=5
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
cat('The number of lines is: ')
cat(nrow(df))
cat('With the number of unique players: ')
length(unique(df$Player))
# Create a dataset with only players scoring at least 5 goals or with xG >=5
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
cat('The number of lines is: ')
cat(nrow(df))
cat('\n With the number of unique players: ')
length(unique(df$Player))
# Create a dataset with only players scoring at least 5 goals or with xG >=5
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
cat('There is')
cat(nrow(df))
cat('entries')
cat(', composed of ')
cat(length(unique(df$Player)))
cat('unique players.')
# Create a dataset with only players scoring at least 5 goals or with xG >=5
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
cat('There is ')
cat(nrow(df))
cat(' entries, composed of ')
cat(length(unique(df$Player)))
cat(' unique players.')
# Create a dataset with only players scoring at least 5 goals or with xG >=5
df_combined <- df %>%
group_by(Player) %>%
summarise(
total_minutes = sum(Minutes, na.rm = TRUE),
total_goals = sum(Goals, na.rm = TRUE),
total_xG = sum(xG, na.rm = TRUE)
) %>%
filter(total_goals >= 5 |
total_xG >= 5)
# Filter the original datasets
df <- df %>%
filter(Player %in% df_combined$Player)
cat('There are ')
cat(nrow(df))
cat(' entries, composed of ')
cat(length(unique(df$Player)))
cat(' unique players.')
